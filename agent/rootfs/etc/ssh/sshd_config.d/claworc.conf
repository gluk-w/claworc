# Claworc SSH daemon configuration â€“ hardened
# Allows control plane to connect via SSH for proxying

# --- Network ---
Port 22
ListenAddress 0.0.0.0

# --- Authentication ---
# Public key only; passwords disabled at every level
PubkeyAuthentication yes
PasswordAuthentication no
PermitEmptyPasswords no
PermitRootLogin prohibit-password
KbdInteractiveAuthentication no
HostbasedAuthentication no
UsePAM no

# --- Security hardening ---
StrictModes yes
MaxAuthTries 3
LoginGraceTime 30
MaxSessions 10
MaxStartups 10:30:60

# --- Forwarding restrictions ---
# Allow local TCP forwarding (required for SSH tunnels to VNC/Gateway)
# but restrict to the two service ports the control plane needs
AllowTcpForwarding local
PermitOpen localhost:3000 localhost:8080
X11Forwarding no
AllowAgentForwarding no
AllowStreamLocalForwarding no

# --- Logging (syslog-compatible) ---
# SyslogFacility and LogLevel govern what is logged.
# sshd runs with -e so output goes to stderr/file, but these
# directives still control verbosity and categorization.
SyslogFacility AUTH
LogLevel INFO
